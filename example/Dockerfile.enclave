# Use Amazon Linux 2023 minimal image
FROM public.ecr.aws/amazonlinux/amazonlinux:2023-minimal

# Set working directory
WORKDIR /app

# Build argument for binary path (default to release)
ARG BINARY_PATH=target/release

# Copy the pre-built binary
COPY ${BINARY_PATH}/enclave /app/enclave

RUN chmod +x /app/enclave

# Run the enclave
CMD ["/app/enclave"]
